
============================================================
Processing Balboa Pool
============================================================
Fetching documents from facility page...
Found 5 documents
  PDF signature: ['2025 Balboa Pool Fall Pool Schedule']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', '2025 Balboa Pool Fall Pool Schedule', '', '', '']
  Search terms: ['balboa pool', 'balboa']
  Skipped 'Mission Pool Schedule' - no search term match
  Candidate schedule PDFs: ['2025 Balboa Pool Fall Pool Schedule']
  Claude date selection response: 'Looking at the document "2025 Bal'
  Attempt 1: Invalid index 2025 (only 1 candidates), retrying...
  Claude date selection response: '1'
Selected: 2025 Balboa Pool Fall Pool Schedule
Selected: 2025 Balboa Pool Fall Pool Schedule
Downloading PDF...
PASS 1: Extracting raw schedule from PDF...
  Converting PDF to image for better visual extraction...
Converted PDF to image: /tmp/Balboa_Pool_schedule_page1.png (size: (4171, 2955))
  Extracting Sunday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Sunday
  Extracting Monday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Monday
  Extracting Tuesday (best of 3)...
    Run 1/3...
      Got 9 activities
    Run 2/3...
      Got 9 activities
    Run 3/3...
      Got 9 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 9 activities for Tuesday
  Extracting Wednesday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Wednesday
  Extracting Thursday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Thursday
  Extracting Friday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Friday
  Extracting Saturday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 5 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Saturday

✓ Completed best-of-three extraction for all days
Raw schedule extracted successfully
Saved raw schedule to /tmp/Balboa_Pool_raw_schedule.json
PASS 2: Filtering for family/parent-child swim...
Family swim data filtered successfully
PASS 3: Extracting lap swim from raw schedule...
Found 12 lap swim slots
PASS 4: Extracting all activities for conflict detection...
Found 25 non-lap activity slots
PASS 5: Calculating secret swim times...
  Using deterministic calculation for Balboa secret swim...
PASS 6: Combining and sorting schedules...
✓ Successfully processed Balboa Pool

============================================================
Processing Coffman Pool
============================================================
Fetching documents from facility page...
Found 5 documents
  PDF signature: ['Coffman Pool_Fall25_Aug19_Dec27']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', 'Coffman Pool_Fall25_Aug19_Dec27', '', '', '']
  Search terms: ['coffman pool', 'coffman']
  Skipped 'Mission Pool Schedule' - no search term match
  Candidate schedule PDFs: ['Coffman Pool_Fall25_Aug19_Dec27']
  Claude date selection response: '1'
Selected: Coffman Pool_Fall25_Aug19_Dec27
Selected: Coffman Pool_Fall25_Aug19_Dec27
Downloading PDF...
PASS 1: Extracting raw schedule from PDF...
  Converting PDF to image for better visual extraction...
Converted PDF to image: /tmp/Coffman_Pool_schedule_page1.png (size: (3301, 2550))
  Extracting Sunday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Sunday
  Extracting Monday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Monday
  Extracting Tuesday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Tuesday
  Extracting Wednesday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 5 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Wednesday
  Extracting Thursday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Thursday
  Extracting Friday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Friday
  Extracting Saturday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 5 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Saturday

✓ Completed best-of-three extraction for all days
Raw schedule extracted successfully
Saved raw schedule to /tmp/Coffman_Pool_raw_schedule.json
PASS 2: Filtering for family/parent-child swim...
Family swim data filtered successfully
Skipping secret swim extraction (not needed for Coffman Pool)
✓ Successfully processed Coffman Pool

============================================================
Processing Garfield Pool
============================================================
Fetching documents from facility page...
Found 5 documents
  PDF signature: ['Garfield_FALL 2025_AUG17-DEC24']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', 'Garfield_FALL 2025_AUG17-DEC24', '', '', '']
  Search terms: ['garfield pool', 'garfield']
  Skipped 'Mission Pool Schedule' - no search term match
  Candidate schedule PDFs: ['Garfield_FALL 2025_AUG17-DEC24']
  Claude date selection response: '1'
Selected: Garfield_FALL 2025_AUG17-DEC24
Selected: Garfield_FALL 2025_AUG17-DEC24
Downloading PDF...
PASS 1: Extracting raw schedule from PDF...
  Converting PDF to image for better visual extraction...
Converted PDF to image: /tmp/Garfield_Pool_schedule_page1.png (size: (3301, 2550))
  Extracting Sunday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 5 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Sunday
  Extracting Monday (best of 3)...
    Run 1/3...
      Got 10 activities
    Run 2/3...
      Got 10 activities
    Run 3/3...
      Got 10 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 10 activities for Monday
  Extracting Tuesday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Tuesday
  Extracting Wednesday (best of 3)...
    Run 1/3...
      Got 9 activities
    Run 2/3...
      Got 9 activities
    Run 3/3...
      Got 9 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 9 activities for Wednesday
  Extracting Thursday (best of 3)...
    Run 1/3...
      Got 9 activities
    Run 2/3...
      Got 9 activities
    Run 3/3...
      Got 9 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 9 activities for Thursday
  Extracting Friday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Friday
  Extracting Saturday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Saturday

✓ Completed best-of-three extraction for all days
Raw schedule extracted successfully
Saved raw schedule to /tmp/Garfield_Pool_raw_schedule.json
PASS 2: Filtering for family/parent-child swim...
Family swim data filtered successfully
PASS 3: Extracting lap swim from raw schedule...
Found 14 lap swim slots
PASS 4: Extracting all activities for conflict detection...
Found 27 non-lap activity slots
PASS 5: Calculating secret swim times...
  Using deterministic calculation for Garfield secret swim...
PASS 6: Combining and sorting schedules...
✓ Successfully processed Garfield Pool

============================================================
Processing Hamilton Pool
============================================================
Fetching documents from facility page...
Found 5 documents
  PDF signature: ['Hamilton Pool _ Fall 25_ Aug 19 _ Dec 13']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', 'Hamilton Pool _ Fall 25_ Aug 19 _ Dec 13', '', '', '']
  Search terms: ['hamilton pool', 'hamilton']
  Skipped 'Mission Pool Schedule' - no search term match
  Candidate schedule PDFs: ['Hamilton Pool _ Fall 25_ Aug 19 _ Dec 13']
  Claude date selection response: '1'
Selected: Hamilton Pool _ Fall 25_ Aug 19 _ Dec 13
Selected: Hamilton Pool _ Fall 25_ Aug 19 _ Dec 13
Downloading PDF...
PASS 1: Extracting raw schedule from PDF...
  Converting PDF to image for better visual extraction...
Converted PDF to image: /tmp/Hamilton_Pool_schedule_page1.png (size: (3301, 2550))
  Extracting Sunday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Sunday
  Extracting Monday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Monday
  Extracting Tuesday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Tuesday
  Extracting Wednesday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Wednesday
  Extracting Thursday (best of 3)...
    Run 1/3...
      Got 6 activities
    Run 2/3...
      Got 6 activities
    Run 3/3...
      Got 6 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 6 activities for Thursday
  Extracting Friday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Friday
  Extracting Saturday (best of 3)...
    Run 1/3...
      Got 4 activities
    Run 2/3...
      Got 4 activities
    Run 3/3...
      Got 4 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 4 activities for Saturday

✓ Completed best-of-three extraction for all days
Raw schedule extracted successfully
Saved raw schedule to /tmp/Hamilton_Pool_raw_schedule.json
PASS 2: Filtering for family/parent-child swim...
Family swim data filtered successfully
PASS 3: Extracting lap swim from raw schedule...
Found 15 lap swim slots
PASS 4: Extracting all activities for conflict detection...
Found 19 non-lap activity slots
PASS 5: Calculating secret swim times...
  Using deterministic calculation for Hamilton secret swim...
PASS 6: Combining and sorting schedules...
✓ Successfully processed Hamilton Pool

============================================================
Processing Martin Luther King Jr Pool
============================================================
Fetching documents from facility page...
Found 5 documents
  PDF signature: ['MLK_Fall25_nov25_dec27']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', 'MLK_Fall25_nov25_dec27', '', '', '']
  Search terms: ['martin luther king jr pool', 'martin luther king jr', 'mlk']
  Skipped 'Mission Pool Schedule' - no search term match
  Candidate schedule PDFs: ['MLK_Fall25_nov25_dec27']
  Claude date selection response: '1'
Selected: MLK_Fall25_nov25_dec27
Selected: MLK_Fall25_nov25_dec27
Downloading PDF...
PASS 1: Extracting raw schedule from PDF...
  Converting PDF to image for better visual extraction...
Converted PDF to image: /tmp/Martin_Luther_King_Jr_Pool_schedule_page1.png (size: (3301, 2550))
  Extracting Sunday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Sunday
  Extracting Monday (best of 3)...
    Run 1/3...
      Got 0 activities
    Run 2/3...
      Got 0 activities
    Run 3/3...
      Got 0 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 0 activities for Monday
  Extracting Tuesday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Tuesday
  Extracting Wednesday (best of 3)...
    Run 1/3...
      Got 7 activities
    Run 2/3...
      Got 9 activities
    Run 3/3...
      Got 7 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 7 activities for Wednesday
  Extracting Thursday (best of 3)...
    Run 1/3...
      Got 8 activities
    Run 2/3...
      Got 8 activities
    Run 3/3...
      Got 8 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 8 activities for Thursday
  Extracting Friday (best of 3)...
    Run 1/3...
      Got 7 activities
    Run 2/3...
      Got 7 activities
    Run 3/3...
      Got 7 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 7 activities for Friday
  Extracting Saturday (best of 3)...
    Run 1/3...
      Got 5 activities
    Run 2/3...
      Got 5 activities
    Run 3/3...
      Got 5 activities
      ✓ Extractions 1 & 2 match - using extraction 1
    Final: 5 activities for Saturday

✓ Completed best-of-three extraction for all days
Raw schedule extracted successfully
Saved raw schedule to /tmp/Martin_Luther_King_Jr_Pool_raw_schedule.json
PASS 2: Filtering for family/parent-child swim...
Family swim data filtered successfully
Skipping secret swim extraction (not needed for Martin Luther King Jr Pool)
✓ Successfully processed Martin Luther King Jr Pool

============================================================
Processing Mission Community Pool
============================================================
Fetching documents from facility page...
Found 6 documents
  PDF signature: ['Mission Pool Rules and Guidelines (1/5/21 Update)', 'Mission Pool Schedule', 'Mission_Fall25_Nov1_Nov22']
  Force refresh enabled, re-parsing...
  Documents on page: ['Mission Pool Schedule', 'Mission_Fall25_Nov1_Nov22', 'Mission Pool Rules and Guidelines (1/5/21 Update)', '', '', '']
  Search terms: ['mission community pool', 'mission community', 'mission']
  Candidate schedule PDFs: ['Mission Pool Schedule', 'Mission_Fall25_Nov1_Nov22', 'Mission Pool Rules and Guidelines (1/5/21 Update)']
  Claude date selection response: 'Analyzing each document for December 10,'
